



# Spring IOC 
Spring 有两个核心组件，一个是 **AOP** ，另一个就是 **IOC** 。 IOC 容器实现的思想是依赖反转，何为依赖反转呢？在 java 程序开发中，一个对象要持有一个对象，通常用 new 关键字获取一个对象。例如 A 对象使用 new 持有了 B 对象，我们就认为 A 对象和 B 对象之间是依赖关系。而依赖反转，是哪方面被反转呢？Martin Fowler 的结论是：依赖对象的获得被反转了。依赖反转也可以称为依赖注入，我的理解是 B 对象被创建时，交给 IOC 容器管理，当 A 对象需要引用 B 对象时，IOC 容器（调控者）将B对象的引用交给 A ，这就实现了依赖反转。

控制反转是一个关于对象如cd何获取它要依赖对象的引用， IOC 容器的出现就是为了解决这个问题的！


## IOC 对象依赖关系的管理者

使用了依赖注入，通过 IOC 容器对对象之间的依赖关系进行管理，并由 IOC 容器完成对象的注入，在很大程度上简化了我们的开发。同时，IOC 容器负责管理对象之间的依赖关系，使得对象之间的依赖不那么强烈了，达到了解耦的目的，削弱对象之间的依赖关系有利于我们进行单元测试。在不使用 IOC 容器之间，进行单元测试，会由于对象之间的依赖关系很多导致单元测试无法高效进行，所以使用 IOC 容器从某种程度上加快了我们开发，让我们更专注与业务流程的开发设计。


## 适用 IOC 容器进行管理的对象

在 java 编程中，除了一部分对象是数据对象(用来存放数据)外，大部分对象都是用来处理这些数据对象的，这些对象的状态不是经常变化，在系统中以单例的形式存在足以满系统的需求。这些对象通常不涉及数据及状态问题，如果有的话，可以进行进一步的处理，例如单例模式共享全局变量，可以使用 ThreadLocal 。对于对象之间依赖关系相对稳定的对象，也适合使用 IOC 容器进行管理。

## IOC 容器的设计与实现
在 IOC 容器的实现中，**BeanFactory** 和 **ApplicationContext** 定义了两个容器系列， **BeanFactory** 属于低级容器，**ApplicationContext** 属于高级容器。**BeanFactory** 是最基本的基础容器，定义了容器的基本功能，容器就像模板一样，有大有小，有各种形状，而这些容器接口就定义了各种模板，你需要什么模板，也可以自行定义。

在 IOC 容器中，Spring 通过定义 **BeanDefinition** 来管理对象与对象之间的依赖关系。**BeanDefinition** 抽象了我们对 Bean 的定义，是让容器起作用的重要数据结构。在计算机世界的所有功能，都是建立在通过数据对现实进行抽象的基础上。

### 