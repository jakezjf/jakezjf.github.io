---
layout:     post
title:      "垃圾回收机制的原理及实现"
subtitle:   "学习垃圾回收机制的原理及实现"
date:       2017-02-01
author:     "JianFeng"
header-img: "img/blog/jvm-eden.jpg"
catalog: true
tags:
    - Java
---

> 本篇将学习垃圾回收机制的原理及实现

# 垃圾回收算法
 作为 Java 开发者对于 GC 一定不会陌生，GC 是 Garbage Collection 的简称，翻译为垃圾回收。垃圾就是我们不需要使用的东西，我们把程序中不用的内存空间称为垃圾。

# GC 要做什么呢？

- 需要找到不需要使用的内存空间。
- 回收垃圾，释放内存空间给程序使用。

# GC 给我们带来什么好处呢？
 GC 的出现使得开发者不需要关注程序内存的具体情况，全部交给 GC 进行内存管理，使得程序员更加专注业务的开发。像早期的语言 C++，不支持 GC ，使得 C++ 程序员每次使用完对象要手动回收对象，稍不留意忘记回收了对象可能会引起内存泄漏，严重的话会导致程序崩溃。有了 GC 程序员就不用担心因为粗心大意忘记回收内存而引发 BUG 了。

# 标记-清除算法
## 标记-清除算法是出现较早的垃圾回收算法，也是使用最为广泛的垃圾回收算法。标记-清除算法从字面上理解，该垃圾回收过程分为两步：1.标记出所有活动的对象；2.将那些未经标记的对象进行回收，释放内存空间。

## 标记
## 我们是如何确定一个对象是否为活动对象的呢？通过对根节点的引用判断，当一个对象被根节点所引用，那么说明这个对象是有用的，垃圾回收器会在该对象的头部进行标记。

## 根节点是什么呢？
## 在 Java 内存模型中，虚拟机栈和方法区可以作为 ROOT 根节点。Java 栈随着方法的调用而创建，随着方法的执行完毕而销毁，在栈中创建了一个对象或引用一个对象，那么栈就可以作为根节点，在进行垃圾回收时，被栈引用的对象将不会被回收。


# C++ 和 Java 内存管理
 Java 是一个跨平台移植性很强的语言，一次编写，到处运行。这归功于 JVM （Java 虚拟机），Java 源代码经过编译后，生成 Class 文件，Class 文件在 JVM 中转化为汇编指令，使得程序得以运行。C++ 和 Java 的一个明显不同之处就是对象回收，C++ 中对象使用完毕需要进行手动回收也就是析构。Java 的内存模型组成：虚拟机栈、本地方法栈、程序计数器、方法区、堆，Java 程序的对象一般存放在堆里。计算机的内存不是无限大的，对于一些不需要继续使用的对象，应该将它删除，释放内存空间给其他对象分配，如果不对内存空间进行清理，那么对象越来越多，会导致内存泄漏的问题。C++ 中使用析构函数释放内存，而在 Java 中如何回收内存呢？
 
# JVM 垃圾回收器
JVM 为了有效利用内存空间，防止内存泄漏，引入了垃圾回收器，程序员不需要太关注内存的问题，这些问题都由垃圾回收器解决了。


